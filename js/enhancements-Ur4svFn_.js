function t(t,n){const a=new URL(window.location.href).searchParams.get(t);if(null===a)return n;const e=Number(a);return isNaN(e)?"true"===a||"false"!==a&&a:e}function n(n={}){const a={windowSize:t("window",15),noiseSigma:t("sigma",.005),gain:t("gain",.9),...n},e=[];return function(t){if(!t||0===t.length)return t;if(0===e.length)return e.push(t.slice()),t.slice();const n=2/(a.windowSize+1),i=e[e.length-1],s=[];for(let e=0;e<t.length;e++){const o=a.noiseSigma*Math.sqrt(-2*Math.log(Math.random()))*Math.cos(2*Math.PI*Math.random()),r=t[e]+o;s[e]=n*r+(1-n)*i[e],s[e]=a.gain*s[e]+(1-a.gain)*t[e]}return e.push(s.slice()),e.length>a.windowSize&&e.shift(),s}}function a(t={}){const n={Kp:t.Kp||.5,Ki:t.Ki||.1,maxAdjust:t.maxAdjust||.03,...t};let a=0;return{config:n,computeAdjustment(t,e,i){let s=t-e;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;a+=s*i;const o=n.Kp*s+n.Ki*a;return Math.max(-n.maxAdjust,Math.min(n.maxAdjust,o))},reset(){a=0}}}export{a,n as c,t as g};
